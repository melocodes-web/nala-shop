<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Charms and addons</title>
  <link rel="stylesheet" href="produkt.css">
  <style type="text/css">
  .auto-style1 {
	  margin-left: 0px;
  }
  .auto-style2 {
	  border-color: #00FFFF;
	  border-width: 0;
  }
  .auto-style3 {
	  text-align: center;
	  border: 0 solid #FFFFFF;
	  background-color: #DCDOFF;
  }
  .auto-style4 {
	  font-size: xx-large;
	  font-family: Cambria, Cochin, Georgia, Times, "Times New Roman", serif;
	  color: #FFFFFF;
  }
  .auto-style5 {
	  color: #FFFFFF;
  }
  .auto-style6 {
	  color: #FFFFFF;
	  font-size: large;
  }
  </style>
</head>
<body>
<header style="display:flex; justify-content:space-between; align-items:center; padding:10px 20px;">
  <a href="index.html" style="text-decoration:none; color:#333;">← Back to Home page</a>
  <a href="cart.html" id="cartLink" style="text-decoration:none; color:#333; font-weight:bold;">
    🛒 Cart (<span id="cartCount">0</span>)
  </a>
</header>

 	  
	  
<section id="shop" class="products">
  <h2 style="height: 207px; width: 1471px;"><span lang="de">Select a Charm to levitate your Jewellery!</span></h2>
   <!-- Hier werden die Produkte dynamisch eingefügt -->
  <div id="productGrid" class="product-grid" style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">
    <!-- Produkte erscheinen hier durch JavaScript -->
  </div>
</section>

  
  <!-- Footer -->
  <footer>
    <p>© 202<span lang="de">5</span> Charms Shop | Handmade with Love</p>
  </footer>

<script>
const apiUrl = "https://script.google.com/macros/s/AKfycbzCNqvv8T4iScoZismiFjP9gcA7LACFU5UEkBfA92x_sAH7LmzzGfO9cpx_ofl07WBcKg/exec"; 

fetch(apiUrl)
  .then(res => res.json())
  .then(products => {
    const grid = document.getElementById("productGrid");
    products.forEach(p => {
      const card = document.createElement("div");
      card.className = "product";
      card.innerHTML = `
        <a href="charmsandaddons.html?id=${encodeURIComponent(p.id)}">
          <img src="${p.images && p.images[0] ? p.images[0] : 'placeholder.jpg'}" 
               alt="${p.name}" 
               style="width:200px; height:200px; object-fit:cover;">
          <h3>${p.name}</h3>
          <p>${p.description}</p>
          <span class="price">${p.price} Rwf</span>
          <button>Add to Cart</button>
        </a>
      `;
      grid.appendChild(card);
    });
  })
  .catch(err => {
    console.error("Mistake loading the product:", err);
    document.getElementById("productGrid").innerHTML = "<p>Products werent able to be uploaded .</p>";
  });
</script>

<script>
const CART_KEY = "nala_cart_v1";

function getCart() {
  const raw = localStorage.getItem(CART_KEY);
  return raw ? JSON.parse(raw) : [];
}

function updateCartCount() {
  const cart = getCart();
  const countEl = document.getElementById("cartCount");
  if (countEl) countEl.textContent = cart.length;
}

// aktualisiert beim Laden
updateCartCount();

// optional: globale Funktion für andere Seiten (z. B. cart.html)
window.updateCartCount = updateCartCount;
</script>



</body>
</html>
